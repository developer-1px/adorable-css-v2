import{g as z,i as F,a as L,p as P,S as q,c as K,R as M,b as k,d as B,e as b,f as O,h as U}from"./lUxJF2wp.js";const R=e=>{const i=e.length,n=e.charCodeAt(0);let s=-1,t,r="";for(;++s<i;){if(t=e.charCodeAt(s),t==0){r+="�";continue}if(t>=1&&t<=31||t==127||s==0&&t>=48&&t<=57||s==1&&t>=48&&t<=57&&n==45){r+="\\"+t.toString(16)+" ";continue}if(s==0&&i==1&&t==45){r+="\\"+e.charAt(s);continue}if(t>=128||t==45||t==95||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122){r+=e.charAt(s);continue}r+="\\"+e.charAt(s)}return r};function H(e){return e.replace(/(\.[^{\.]+)(\1)+/g,"$1")}const y=(e,i)=>{const n=[],s=[];return Object.entries(e||{}).forEach(([t,r])=>{if(r!==void 0)if(typeof r=="object"&&r!==null){const a=y(r);if(a.mainCSS){const u=i?t.replace("&",i):t;s.push(`${u}{${a.mainCSS}}`)}s.push(...a.nestedCSS)}else n.push(`${t}:${r}`)}),{mainCSS:n.join(";"),nestedCSS:s}},x=e=>{var i;return{type:e.name?"function":"keyword",name:e.name||e.image,args:(i=e.args)==null?void 0:i.map(n=>{if(n.type==="triple-range")return`${n.min.image}..${n.preferred.image}..${n.max.image}`;if(n.type==="range"){const s=n.min?n.min.image:"",t=n.max?n.max.image:"";return`${s}..${t}`}return n.image})}},j=(e,i,n=new Set,s)=>{var f,m;const t=`${e}(${i||""})`;if(n.has(t))return console.warn(`⚠️  AdorableCSS: Circular dependency detected for string rule "${t}"`),{mainCSS:"",nestedCSS:[],priority:0};n.add(t);const r=b.getStringRule(e);if(!r)return{mainCSS:"",nestedCSS:[],priority:0};const a=r.handler;let u;try{u=typeof a=="function"?i!==void 0?a(i):a():""}catch(o){return console.warn(`⚠️  AdorableCSS: Error executing string rule "${e}":`,o),{mainCSS:"",nestedCSS:[],priority:r.priority}}const p=[];if(Array.isArray(u)){for(const o of u)if(typeof o=="string"){if(!o.trim())continue;const l=o.trim().split(/\s+/);for(const c of l)if(c)try{const S=P(c);if(S.value.length>0){const h=S.value[0].selector,$=h.name||h.image,w=(f=h.args)==null?void 0:f.map(d=>d.image).join("");if(b.hasString($)){const d=j($,w,new Set(n));p.push(d)}else{const d=A(x(h));p.push(d)}}}catch(S){console.warn(`⚠️  AdorableCSS: Error parsing class "${c}" from string rule "${e}":`,S)}}else if(typeof o=="object"&&o!==null){const l=y(o,s);p.push({...l,priority:r.priority})}}else{const o=u;if(!o.trim())return{mainCSS:"",nestedCSS:[],priority:r.priority};const l=o.trim().split(/\s+/);for(const c of l)if(c)try{const S=P(c);if(S.value.length>0){const h=S.value[0].selector,$=h.name||h.image,w=(m=h.args)==null?void 0:m.map(d=>d.image).join("");if(b.hasString($)){const d=j($,w,new Set(n));p.push(d)}else{const d=A(x(h));p.push(d)}}}catch(S){console.warn(`⚠️  AdorableCSS: Error parsing class "${c}" from string rule "${e}":`,S)}}const C=p.map(o=>o.mainCSS).filter(Boolean),g=p.flatMap(o=>o.nestedCSS);return{mainCSS:C.join(";"),nestedCSS:g,priority:r.priority}},A=(e,i)=>{if(b.hasString(e.name)){const a=e.type==="function"&&e.args?e.args.join(""):void 0;return j(e.name,a,new Set,i)}let n=O(e.name),s=U(e.name);if(n||(n=B(e.name)),!n)return console.warn(`⚠️  AdorableCSS: Rule handler not found for "${e.name}"`),{mainCSS:"",nestedCSS:[],priority:0};const t=e.type==="function"&&e.args?n(e.args.join("")):n("");return{...y(t,i),priority:(s==null?void 0:s.priority)||0}},V=(e,i)=>{const n=e.combinators[0],s=e.selector.image,t=n.selector,r=`${i}:${s}`;return{selector:r,cssResult:A(x(t),r)}},W=(e,i)=>{const n=e.selector;if(n.type==="position")return{...y({position:"absolute",left:String(k(n.x.image)),top:String(k(n.y.image))},i),priority:200};if(n.type==="(dimension-pair)"){const s=B("dimension-pair");if(s){const t=s(n.image);return{...y(t,i),priority:200}}}return A(x(n),i)};function E(e){if(!e)return"";if(F(e))return D(e);if(L(e))return I(e);try{const i=P(e),n=e.match(/(!+)$/),s=n?n[1].length:0,t="."+R(e);let r=t;s>0&&(r="[class]".repeat(s)+t);const a=[];let u=!1;i.value.forEach(o=>{var l;if(((l=o.combinators)==null?void 0:l.length)>0&&o.combinators[0].combinator===":"){const{selector:c,cssResult:S}=V(o,t);s>0?r="[class]".repeat(s)+c:r=c,a.push(S),(S.mainCSS||S.nestedCSS.length>0)&&(u=!0)}else{const c=W(o,t);a.push(c),(c.mainCSS||c.nestedCSS.length>0)&&(u=!0)}}),a.sort((o,l)=>(o.priority||0)-(l.priority||0));const C=a.map(o=>o.mainCSS).filter(Boolean).join(";"),g=a.flatMap(o=>o.nestedCSS);if(!u&&i.value.length>0&&console.warn(`⚠️  AdorableCSS: Class "${e}" parsed successfully but generated no CSS`),!C&&g.length===0)return"";const f=[],m=a.some(o=>(o.priority||0)>=300);if(C){let o=r;m&&s===0&&(o=r+r.replace(/^\./,".")),f.push(`${o}{${C}}`)}return f.push(...g),H(f.join(""))}catch(i){return console.warn(`❌ AdorableCSS: Failed to parse "${e}"`),console.warn("   Error:",i),""}}function D(e){const i=e.match(/(!+)$/),n=i?i[1].length:0,s=q.analyze(e);if(!s)return console.warn(`⚠️  AdorableCSS: Invalid state pattern "${e}"`),"";const t=s.selector,r=E(t);if(!r)return console.warn(`⚠️  AdorableCSS: Base class "${t}" generated no CSS for state "${e}"`),"";const a=r.match(/[^{]+\{([^}]+)\}/);if(!a)return console.warn(`⚠️  AdorableCSS: Could not parse base CSS for state class "${e}"`),console.warn(`   Base CSS: "${r}"`),"";const u=a[1];""+R(t);const p={};u.split(";").forEach(o=>{if(o.trim()){const[l,c]=o.split(":").map(S=>S.trim());l&&c&&(p[l]=c)}});const C="."+R(e),g=K(p,s,C),f=y(g);let m=f.nestedCSS.length>0?f.nestedCSS[0]:"";return n>0&&m&&(m=m.replace(/^(\.[^{]+)(\{)/,`${"[class]".repeat(n)}$1$2`)),m}function I(e){var l;const i=e.match(/(!+)$/),n=i?i[1].length:0,s=M.analyze(e);if(!s)return console.warn(`⚠️  AdorableCSS: Invalid responsive pattern "${e}"`),"";const t=s.selector,r=E(t);if(!r)return console.warn(`⚠️  AdorableCSS: Base class "${t}" generated no CSS for responsive "${e}"`),"";const a=r.match(/^[^{]+\{([^}]+)\}/);if(!a)return console.warn(`⚠️  AdorableCSS: Could not parse base CSS for responsive class "${e}"`),console.warn(`   Base CSS: "${r}"`),"";const u=a[1],p="."+R(e),C=(l=M.analyze(e))==null?void 0:l.breakpoint;if(!C)return"";const f={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px","3xl":"1920px","4xl":"2560px","5xl":"3200px","6xl":"3840px","7xl":"4096px"}[C];if(!f)return"";const m=s.isMaxWidth?`@media (max-width: ${f})`:`@media (min-width: ${f})`;let o=p;return n>0&&(o="[class]".repeat(n)+p),`${m}{${o}{${u}}}`}function T(e){const i=[...new Set(e)],n=i.map(a=>E(a)).filter(a=>a&&a.trim()!==""),s=[...new Set(n)],t=H(s.join(`
`));return i.some(a=>a.includes("fade-")||a.includes("scale-")||a.includes("slide-")||a.includes("bounce-")||a.includes("float")||a.includes("animate("))?z()+`
`+t:t}export{T as g};
