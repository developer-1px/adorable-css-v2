import"./_3o_K0Cw.js";import{a as S}from"./DWruIgvO.js";const f={version:"2.0.0-beta.1",init:(e={})=>{if(typeof window>"u"){console.warn("AdorableCSS v2 is intended for browser use only");return}const{watch:t=!0,target:o,debug:d=!1}=e;let r=document.getElementById("adorable-css-v2-styles");if(!r){r=document.createElement("style"),r.id="adorable-css-v2-styles",r.setAttribute("data-adorable-css-v2","true");const s=document.head,n=s.querySelector('style, link[rel="stylesheet"]');n?s.insertBefore(r,n):s.appendChild(r)}if(!t)return;const l=new Set,h=()=>{const s=[...l],n=S(s);if(r.innerHTML=n,d){const a=b(s);a.length>0&&(console.warn("AdorableCSS v2: Failed to generate CSS for classes:",a),console.log("These classes might need to be added to the core rules. Please report them!")),console.log("AdorableCSS v2: Updated styles for classes:",s),console.log(`Generated ${s.length} classes, ${a.length} failed`)}},c=s=>{s.classList.forEach(n=>{l.has(n)||l.add(n)})},g=(s=document.documentElement)=>{let n=!1;const a=l.size;c(s),l.size>a&&(n=!0),s.querySelectorAll("*").forEach(u=>{const y=l.size;c(u),l.size>y&&(n=!0)}),n&&h()};g();const m=new MutationObserver(s=>{let n=!1;s.forEach(a=>{if(a.type==="attributes"&&a.attributeName==="class"){const i=l.size;c(a.target),l.size>i&&(n=!0)}a.type==="childList"&&a.addedNodes.forEach(i=>{if(i.nodeType===Node.ELEMENT_NODE){const u=l.size;g(i),l.size>u&&(n=!0)}})}),n&&h()}),C=typeof o=="string"?document.querySelector(o)||document.documentElement:o||document.documentElement;m.observe(C,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),window.__adorableCSSV2Observer=m,window.__adorableCSSV2StyleElement=r,d&&console.log("AdorableCSS v2: Initialized and watching for class changes")},generate:(e,t)=>{const o=S(e);if(t!=null&&t.debug){const d=b(e);d.length>0&&(console.warn("AdorableCSS v2: Failed to generate CSS for classes:",d),console.log("These classes might need to be added to the core rules. Please report them!")),console.log(`Generated CSS for ${e.length} classes, ${d.length} failed`)}return o},destroy:()=>{if(typeof window>"u")return;const e=window.__adorableCSSV2Observer;e&&(e.disconnect(),delete window.__adorableCSSV2Observer);const t=window.__adorableCSSV2StyleElement;t&&t.parentNode&&(t.parentNode.removeChild(t),delete window.__adorableCSSV2StyleElement)}};if(typeof window<"u"){const e=document.currentScript;(e==null?void 0:e.getAttribute("data-auto-init"))!=="false"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{f.init()}):f.init()),window.AdorableCSSV2=f}function b(e){return e.filter(t=>{const o=S([t]);if(!o||o.trim()==="")return!0;const d=o.replace(/\s/g,"");return/^\.[\w\\():-]+\{\}$/.test(d)})}function p(e){const t=b(e),o=e.filter(r=>!t.includes(r)),d=e.length===0?"100%":`${Math.round(o.length/e.length*100)}%`;return{total:e.length,successful:o,failed:t,successRate:d}}export{p as analyzeClasses,b as checkFailedClasses,f as default,S as generateCSS,S as generateCSSFromAdorableCSS};
