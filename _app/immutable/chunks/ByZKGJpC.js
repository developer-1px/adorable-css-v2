import{n as F,o as L,p as H,q as k,r as I,S as z,s as C,u as O,v as P,w as j,x as T,y as h,z as U,A as q}from"./CzP5GL07.js";const R=e=>{const n=e.length,t=e.charCodeAt(0);let r=-1,s,o="";for(;++r<n;){if(s=e.charCodeAt(r),s==0){o+="�";continue}if(s>=1&&s<=31||s==127||r==0&&s>=48&&s<=57||r==1&&s>=48&&s<=57&&t==45){o+="\\"+s.toString(16)+" ";continue}if(r==0&&n==1&&s==45){o+="\\"+e.charAt(r);continue}if(s>=128||s==45||s==95||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122){o+=e.charAt(r);continue}o+="\\"+e.charAt(r)}return o};function v(e){return e.replace(/(\.[^{\.]+)(\1)+/g,"$1")}function x(e){var n;return{type:e.name?"function":"keyword",name:e.name||e.image,args:(n=e.args)==null?void 0:n.map(t=>{if(t.type==="triple-range")return`${t.min.image}..${t.preferred.image}..${t.max.image}`;if(t.type==="range"){const r=t.min?t.min.image:"",s=t.max?t.max.image:"";return`${r}..${s}`}return t.image})}}class Q{static hasAnimations(n){return n.some(t=>t.includes("fade-")||t.includes("scale-")||t.includes("slide-")||t.includes("bounce-")||t.includes("float")||t.includes("animate("))}static getKeyframesCSS(n){return this.hasAnimations(n)?F():""}static prependKeyframesIfNeeded(n,t){const r=this.getKeyframesCSS(t);return r?r+`
`+n:n}}function m(e,n){const t=[],r=[];return Object.entries(e||{}).forEach(([s,o])=>{if(o!==void 0)if(typeof o=="object"&&o!==null){const a=m(o,n);if(a.mainCSS){const l=n?s.replace("&",n):s;r.push(`${l}{${a.mainCSS}}`)}r.push(...a.nestedCSS)}else t.push(`${s}:${o}`)}),{mainCSS:t.join(";"),nestedCSS:r}}const W={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px","3xl":"1920px","4xl":"2560px","5xl":"3200px","6xl":"3840px","7xl":"4096px"};function Y(e){return W[e]}function _(e,n=!1){const t=Y(e);if(t)return n?`@media (max-width: ${t})`:`@media (min-width: ${t})`}function A(e){const n=e.match(/(!+)$/),t=n?n[1].length:0;return{level:t,className:t>0?e.slice(0,-t):e}}function $(e,n){return n<=0?e:"[class]".repeat(n)+e}function B(e){return e>=h.STATE?"state":e>=h.UTILITY?"utility":e>=h.LAYOUT?"layout":"component"}const K=(e,n)=>{let t=e.match(/@layer\s+\w+\s*\{[^{]+\{([^}]+)\}\}/);return t||(t=e.match(/[^{]+\{([^}]+)\}/)),t?t[1]:(console.warn(`⚠️  AdorableCSS: Could not parse base CSS for class "${n}"`),console.warn(`   Base CSS: "${e}"`),null)},E=(e,n,t,r)=>{var s;for(const o of e)if(o)try{const a=I(o);if(a.value.length>0){const l=a.value[0].selector,S=l.name||l.image,p=(s=l.args)==null?void 0:s.map(u=>u.image).join("");if(C.hasString(S)){const u=M(S,p,new Set(t));r.push(u)}else{const u=b(x(l));r.push(u)}}}catch(a){console.warn(`⚠️  AdorableCSS: Error parsing class "${o}" from string rule "${n}":`,a)}},M=(e,n,t=new Set,r)=>{const s=`${e}(${n||""})`;if(t.has(s))return console.warn(`⚠️  AdorableCSS: Circular dependency detected for string rule "${s}"`),{mainCSS:"",nestedCSS:[],priority:0};t.add(s);const o=C.getStringRule(e);if(!o)return{mainCSS:"",nestedCSS:[],priority:0};const a=o.handler;let l;try{l=typeof a=="function"?n!==void 0?a(n):a():""}catch(c){return console.warn(`⚠️  AdorableCSS: Error executing string rule "${e}":`,c),{mainCSS:"",nestedCSS:[],priority:o.priority}}const S=[];if(Array.isArray(l)){for(const c of l)if(typeof c=="string"){if(!c.trim())continue;const i=c.trim().split(/\s+/);E(i,e,t,S)}else if(typeof c=="object"&&c!==null){const i=m(c,r);S.push({...i,priority:o.priority})}}else{const c=l;if(!c.trim())return{mainCSS:"",nestedCSS:[],priority:o.priority};const i=c.trim().split(/\s+/);E(i,e,t,S)}const p=S.map(c=>c.mainCSS).filter(Boolean),u=S.flatMap(c=>c.nestedCSS);return{mainCSS:p.join(";"),nestedCSS:u,priority:o.priority}},b=(e,n)=>{if(C.hasString(e.name)){const l=e.type==="function"&&e.args?e.args.join(""):void 0;return M(e.name,l,new Set,n)}const t=U(e.name)||T(e.name),r=q(e.name);if(!t)return console.warn(`⚠️  AdorableCSS: Rule handler not found for "${e.name}"`),{mainCSS:"",nestedCSS:[],priority:0};const s=e.type==="function"&&e.args?e.args.join(""):"",o=t(s);return{...m(o,n),priority:(r==null?void 0:r.priority)||0}},D=(e,n)=>{const t=e.combinators[0],r=e.selector.image,s=t.selector,o=`${n}:${r}`;return{selector:o,cssResult:b(x(s),o)}},N=(e,n)=>{const t=e.selector;if(t.type==="position")return{...m({position:"absolute",left:String(j(t.x.image)),top:String(j(t.y.image))},n),priority:200};if(t.type==="(dimension-pair)"){const r=T("dimension-pair");if(r){const s=r(t.image);return{...m(s,n),priority:200}}}return b(x(t),n)};function V(e){if(!e)return"";if(H(e))return G(e);if(k(e))return J(e);try{const n=I(e),{level:t}=A(e),r="."+R(e);let s=$(r,t);const o=[];let a=!1;n.value.forEach(i=>{var d;const f=((d=i.combinators)==null?void 0:d.length)>0&&i.combinators[0].combinator===":"?(()=>{const{selector:y,cssResult:g}=D(i,r);return s=$(y,t),g})():N(i,r);o.push(f),(f.mainCSS||f.nestedCSS.length>0)&&(a=!0)}),o.sort((i,f)=>(i.priority||0)-(f.priority||0));const S=o.map(i=>i.mainCSS).filter(Boolean).join(";"),p=o.flatMap(i=>i.nestedCSS);if(!a&&n.value.length>0&&console.warn(`⚠️  AdorableCSS: Class "${e}" parsed successfully but generated no CSS`),!S&&p.length===0)return"";const u=[],c=o.some(i=>(i.priority||0)>=300);if(S){let i=s;c&&t===0&&(i=`:where(${s})${s}`),u.push(`${i}{${S}}`)}return u.push(...p),v(u.join(""))}catch(n){return console.warn(`❌ AdorableCSS: Failed to parse "${e}"`),console.warn("   Error:",n),""}}const w=L(V);function G(e){const{level:n,className:t}=A(e),r=z.analyze(t);if(!r)return console.warn(`⚠️  AdorableCSS: Invalid state pattern "${t}"`),"";const s=w(r.selector);if(!s)return console.warn(`⚠️  AdorableCSS: Base class "${r.selector}" generated no CSS for state "${t}"`),"";const o=K(s,t);if(!o)return"";const a={};o.split(";").forEach(f=>{if(f.trim()){const[d,y]=f.split(":").map(g=>g.trim());d&&y&&(a[d]=y)}});const l=r.selector.split("(")[0],S=C.getAnyRule(l);S&&B(S.priority);const p="."+R(t),u=O(a,r,p),c=m(u);let i=c.nestedCSS.length>0?c.nestedCSS[0]:"";return n>0&&i&&(i=i.replace(/^(\.[^{]+)(\{)/,`${"[class]".repeat(n)}$1$2`)),i}function J(e){const{level:n,className:t}=A(e),r=P.analyze(t);if(!r)return console.warn(`⚠️  AdorableCSS: Invalid responsive pattern "${t}"`),"";const s=w(r.selector);if(!s)return console.warn(`⚠️  AdorableCSS: Base class "${r.selector}" generated no CSS for responsive "${t}"`),"";const o=K(s,t);if(!o)return"";const a=_(r.breakpoint,r.isMaxWidth);if(!a)return"";const l=P.analyze(r.selector),S=(l==null?void 0:l.selector)||r.selector,p=C.getAnyRule(S.split("(")[0]);p&&B(p.priority);const u="."+R(t),c=$(u,n);return`${a}{${c}{${o}}}`}function X(e){const n=[...new Set(e)],t=n.map(o=>w(o)).filter(o=>o&&o.trim()!==""),r=[...new Set(t)],s=v(r.join(`
`));return Q.prependKeyframesIfNeeded(s,n)}const ee=X;export{ee as g};
