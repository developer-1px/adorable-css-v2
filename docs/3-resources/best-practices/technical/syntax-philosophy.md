# AdorableCSS 문법 체계

## 문법의 구조

AdorableCSS의 문법은 **토큰**과 **파서 규칙**으로 구성됩니다.

### 토큰 (Tokens)

파서가 인식하는 최소 단위들:

```
(ws)            공백 문자
(hexcolor)      #3B82F6, #000.5 형태의 색상값
(dimension-pair) 64x64, 100%x50px 같은 크기 쌍
(dimension)     20, 50%, 100vh 같은 단일 크기
(string)        'text' 또는 "text" 형태의 문자열
(color)         white.8, black.2 같은 색상.투명도
(ident)         속성명, 키워드, 변수명
(range)         .. 또는 ... 범위 연산자
(operator)      +, -, /, :, (, ) 등의 연산자
```

### 기본 문법 구조

#### 1. 단순 선택자 (Simple Selector)
```
p(20)           → 함수 호출
hidden          → 단순 식별자
64x64           → 크기 쌍
100             → 단순 숫자
```

#### 2. 함수 호출 (Function Call)
```
속성(인자)
속성(인자1/인자2)
속성(인자1,인자2)
```

함수 인자는 `/` 또는 `,`로 구분됩니다:
- `/` : 주로 순서가 있는 값들 (예: `p(10/20/30/40)`)
- `,` : 주로 독립적인 값들 (예: `layer(top:20,left:30)`)

#### 3. 좌표 문법 (Position)
```
(x,y)
(center,center)
(50%-20,top)
```

좌표는 반드시 `(x,y)` 형태로 작성되며, 각 좌표는 표현식이 될 수 있습니다.

#### 4. 범위 문법 (Range)
```
10..20          → 최소..최대
10..            → 최소값만
..20            → 최대값만
10..5vw..20     → 최소..선호..최대 (삼중 범위)
```

#### 5. 키-값 쌍 (Key-Value)
```
top:20
left:30+right:40
```

`:` 뒤에 오는 값은 표현식이 될 수 있습니다.

#### 6. 표현식 (Expression)
```
20              → 단순 값
50%-20          → 계산식
100vh-80        → 단위가 있는 계산
```

`+`, `-`, `*` 연산자로 값들을 연결할 수 있습니다.

### 결합자 (Combinators)

선택자 앞에 붙어 의미를 확장합니다:

```
:속성()         → 상태 선택자 (hover:, focus:)
.속성()         → 클래스 결합
>속성()         → 자식 선택자
+속성()         → 인접 형제
~속성()         → 일반 형제
#속성()         → ID 선택자
::속성()        → 가상 요소
```

### 중요도 (Importance)

`!`를 추가하여 우선순위를 높입니다:

```
p(20)!          → 한 단계 높은 우선순위
p(20)!!         → 두 단계 높은 우선순위
p(20)!!!        → 세 단계 높은 우선순위
```

### CSS 리터럴 (CSS Literal)

중괄호 안에 일반 CSS를 작성할 수 있습니다:

```
{display: flex; align-items: center}
{color: red !important}
```

## 문법 조합 규칙

### 1. 선택자 목록 (Selector List)

여러 선택자를 공백으로 구분하여 나열:

```
p(20) m(10) bg(blue)
hover:scale(1.05) active:scale(0.95)
```

### 2. 중첩 결합자

결합자는 연속해서 사용 가능:

```
hover:focus:bg(blue)    → hover와 focus 상태일 때
md:hover:p(20)          → 중간 화면에서 hover일 때
```

### 3. 복합 인자

함수 인자로 다른 함수나 표현식 사용:

```
p(calc(20+10))
bg(linear-gradient(45deg,red,blue))
layer(top:20/left:30)
```

## 파싱 우선순위

파서는 다음 순서로 토큰을 해석합니다:

1. **좌표** - `(x,y)` 패턴
2. **CSS 리터럴** - `{...}` 패턴
3. **함수 호출** - `이름(...)` 패턴
4. **범위** - `..` 패턴
5. **식별자** - 단순 이름
6. **크기 쌍** - `NxN` 패턴
7. **단일 크기** - 숫자와 단위

## 문법의 확장성

### 1. 새로운 함수 추가
모든 `식별자(인자)` 형태는 함수로 해석되므로, 새로운 속성은 자동으로 함수 문법을 사용할 수 있습니다.

### 2. 새로운 결합자
`:`, `.`, `>` 등의 결합자는 확장 가능하며, 파서는 이를 자동으로 인식합니다.

### 3. 복합 표현식
표현식 안에서 CSS 함수를 자유롭게 사용할 수 있어, 복잡한 값도 표현 가능합니다.

## 문법 설계 원칙

1. **예측 가능성**: 한 패턴을 배우면 다른 곳에도 동일하게 적용
2. **조합 가능성**: 모든 문법 요소는 독립적이며 자유롭게 조합
3. **CSS 호환성**: CSS 함수와 값을 그대로 사용 가능
4. **확장 가능성**: 새로운 문법 요소를 쉽게 추가 가능

이러한 문법 체계를 통해 AdorableCSS는 단순하면서도 강력한 표현력을 제공합니다.